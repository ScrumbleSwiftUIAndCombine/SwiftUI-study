# #36 ****tab gesture****

- uikit tabgestureì™€ ìœ ì‚¬
- `.gesture` : ì œìŠ¤ì²˜ modifier
- `count`: íƒ­í•œ íšŸìˆ˜ ì¸¡ì •
- `.onEnded`: íƒ­í•œ ì´í›„ ì‹¤í–‰ë˜ëŠ” í´ë¡œì €

```swift

Circle()
	  .fill(doubleTapped ? .orange : Color.gray)
	  .frame(width: 100, height: 100, alignment: .center)
	  .overlay(Text("ë”ë¸”íƒ­").circleTitle())
	  .gesture(doubleTap)

var doubleTap: some Gesture {
    TapGesture(count: 2) // ë”ë¸”í´ë¦­ ì œìŠ¤ì²˜
        .onEnded { _ in
            print("ë‘ë²ˆ íƒ­í–ˆë‹¤.")
            doubleTapped.toggle()
        }
}
    
```

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-10-15 á„‹á…©á„’á…® 3 43 04](https://github.com/ScrumbleSwiftUIAndCombine/swiftui-daily-digest/assets/77331348/e04ec3c0-e862-4f7b-8b61-44d0c11848e9)

# #37 ****mapview****

- MapKit, CoreLocation ì´ìš©
- mapViewë¥¼ UIViewRepresentableë¡œ ë§Œë“¤ê¸°
- gpx fileë¡œ ì‚¬ìš©ì ìœ„ì¹˜ ì¡°ì‘ ê°€ëŠ¥

```swift
struct ContentView: View {
    @State var myPosition = MKCoordinateRegion(
        center: CLLocationCoordinate2D( // ì¤‘ì‹¬
            latitude: 37.331705, // ìœ„ë„
            longitude: -122.030237), // ê²½ë„
        span: MKCoordinateSpan() // ë²”ìœ„
    )
    
    var body: some View {
        MyMapView()
    }
}
```

```swift
import Foundation
import MapKit // ë§´ ì§€ë„
import SwiftUI
import CoreLocation // ìœ„ì¹˜

struct MyMapView: UIViewRepresentable {
    let locationManager = CLLocationManager()
    
    func makeUIView(context: Context) -> some UIView {
        print("MyMapView - makeUIView() called")
        let mkMapView = MKMapView()
        // ë§µë·° delegate ì—°ê²°
        mkMapView.delegate = context.coordinator
        // ìœ„ì¹˜ë§¤ë‹ˆì € delegate ì—°ê²°
        locationManager.delegate = context.coordinator
        
        // ìœ„ì¹˜ ì •í™•ë„ ì„¤ì •
        locationManager.desiredAccuracy = kCLLocationAccuracyBest
        
        // ìœ„ì¹˜ ì´ìš© í—ˆìš© ë¬¼ì–´ë³´ê¸°
        locationManager.requestWhenInUseAuthorization()
        
        // í˜„ì¬ ìœ„ì¹˜ ì—…ë°ì´íŠ¸ ì‹œì‘
        locationManager.startUpdatingLocation()
        
        mkMapView.showsUserLocation = true // í˜„ì¬ ì‚¬ìš©ì ìœ„ì¹˜ ë³´ì—¬ì£¼ê¸°
        mkMapView.setUserTrackingMode(.follow, animated: true) // ë”°ë¼ì˜¤ëŠ”ì§€ ì—¬ë¶€
        
        let regionRadius: CLLocationDistance = 200 // ì•± ì¹´ë©”ë¼ ë°˜ê²½
        
        // ë³´ì—¬ì¤„ ì§€ì—­ ì„¤ì •
        let coordinateRegion = MKCoordinateRegion(
            center: mkMapView.userLocation.coordinate,
            latitudinalMeters: regionRadius,
            longitudinalMeters: regionRadius
        )
        
        // ì§€ë„ì˜ ì§€ì—­ ì„¤ì •
        mkMapView.setRegion(coordinateRegion, animated: true)
        
        return mkMapView
    }
    
    func updateUIView(_ uiView: UIViewType, context: Context) {
        print("MyMapView - updateUIView() called")
    }
    
    func makeCoordinator() -> MyMapView.Coordinator{
        return MyMapView.Coordinator(self)
    }
    
    class Coordinator: NSObject {
        var myMapView: MyMapView // SwiftUI View
        init(_ myMapView: MyMapView) {
            self.myMapView = myMapView
        }
    }
}

extension MyMapView.Coordinator: MKMapViewDelegate {
    
}
extension MyMapView.Coordinator: CLLocationManagerDelegate {
    // ìœ„ì¹˜ê°€ ë³€ê²½ë˜ì—ˆì„ ë•Œ
    func locationManager(_ manager: CLLocationManager, didUpdateLocations locations: [CLLocation]) {
        guard let lat = locations.first?.coordinate.latitude,
              let long = locations.first?.coordinate.longitude else {
            return
        }
        print("didUpdateLocations - ìœ„ë„: \(lat), ê²½ë„: \(long)")
    }
}
```
![simulator_screenshot_603FD28A-8664-4F43-8173-CF4D65AC2ECE](https://github.com/ScrumbleSwiftUIAndCombine/swiftui-daily-digest/assets/77331348/e372dfa6-63d3-4ff8-b22d-a5253200eab7)

# #38 ****scrollview reader****

- `Namespace`: SwiftUIì—ì„œ ê³ ìœ í•œ ì‹ë³„ìë¥¼ ìƒì„±í•˜ê³  ì‚¬ìš©í•˜ê¸° ìœ„í•œ ë°©ë²•
    - ì´ ì‹ë³„ìë¥¼ í†µí•´ **`proxy.scrollTo`** ë©”ì„œë“œê°€ ì• ë‹ˆë©”ì´ì…˜ê³¼ í•¨ê»˜ íŠ¹ì • ìœ„ì¹˜ë¡œ ìŠ¤í¬ë¡¤í•  ìˆ˜ ìˆë‹¤.
- `ScrollViewReader`: ScrollViewì˜ ì½˜í…ì¸ ë¥¼ ì½ê³  ìƒí˜¸ ì‘ìš©í•  ìˆ˜ ìˆëŠ” í”„ë¡ì‹œë¥¼ ì œê³µí•˜ëŠ” ì»¨í…Œì´ë„ˆ
    - `proxy`
        - ScrollViewì˜ ì½˜í…ì¸ ì™€ ìƒí˜¸ ì‘ìš©í•  ë•Œ ì‚¬ìš©ë˜ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•˜ëŠ” ê°ì²´
        - ScrollViewì˜ ìœ„ì¹˜ë¥¼ ì¡°ì‘í•˜ê±°ë‚˜ íŠ¹ì • ìœ„ì¹˜ë¡œ ìŠ¤í¬ë¡¤í•˜ëŠ” ë“±ì˜ ì‘ì—…ì„ ìˆ˜í–‰ ex) proxy.scrollTo(ID)

```swift
import SwiftUI

struct ContentView: View {
    
    @State var selectedIndex: Int = 0
    @Namespace var topID
    @Namespace var bottomID
    
    var selectedBG : (Int, Int) -> Color = { currentItemIndex, selectedItemIndex in
        if currentItemIndex == selectedItemIndex {
            return Color.green
        } else {
            return Color.yellow
        }
    }
    
    var body: some View {
        VStack{
            ScrollViewReader { proxy in
                ScrollView(.vertical, showsIndicators: false){
                    Button("Scroll to Bottom") {
                        withAnimation {
                            proxy.scrollTo(bottomID)
                        }
                    }
                    .id(topID)
                    
                    ForEach(0..<100, content: { index in
                        Text("ì˜¤ëŠ˜ë„ ë¹¡ì½”ë”©! ğŸ”¥ğŸ‘¨â€ğŸ’» \(index)")
                            .padding(50)
                            .background(selectedBG(index, selectedIndex))
                            .id(index)
                    })
                    .onChange(of: selectedIndex, perform: { changedIndex in
                        print("changedIndex: ", changedIndex)
                        withAnimation{
                            proxy.scrollTo(changedIndex, anchor: .center)
                        }
                    })
                    
                    Button("Scroll to Top") {
                        withAnimation {
                            proxy.scrollTo(topID)
                        }
                    }
                    .id(bottomID)
                }
            }
            
            HStack(spacing: 10) {
                Button(action: {
                    selectedIndex = 6
                }, label: {
                    Text("ì¸ë±ìŠ¤ : 6").padding()
                })
                Button(action: {
                    selectedIndex = 50
                }, label: {
                    Text("ì¸ë±ìŠ¤ : 50").padding()
                })
                Button(action: {
                    selectedIndex = 90
                }, label: {
                    Text("ì¸ë±ìŠ¤ : 90").padding()
                })
            }
            
        }
        
    }
}
```

https://github.com/ScrumbleSwiftUIAndCombine/swiftui-daily-digest/assets/77331348/52fd4d99-42fd-47ad-a728-5521ecf56e8b



# #39 ****drag and drop****

ë“œë˜ê·¸ì•¤ë“œë ê¸°ëŠ¥ ê°€ëŠ¥

# #40 ****production & development****

ê°œë°œ/ìš´ì˜ì•± ë‚˜ëˆ„ê¸°
<img width="284" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-10-26 á„‹á…©á„Œá…¥á†« 2 09 19" src="https://github.com/ScrumbleSwiftUIAndCombine/swiftui-daily-digest/assets/77331348/59c27d0f-3e83-4160-b5b8-b37f81717a90">

# #41 ****xcode 13 colorLiteral****

body ë°–ì—ì„œ Color()ê´„í˜¸ ì•ˆì— `#colorLiteral()` ë„£ê¸°

bodyì•ˆì—ì„œëŠ” ì ìš© ì•ˆë¨

# #42 ****ios fcm push notification****
<img width="242" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-10-17 á„‹á…©á„’á…® 11 49 31" src="https://github.com/ScrumbleSwiftUIAndCombine/swiftui-daily-digest/assets/77331348/aab87fea-cb62-450b-9579-2367ad4c4e12">

- ê°œë°œ(Debug), ìš´ì˜(Release) ì— ë”°ë¼ í‚¤ íŒŒì¼ ë‹¤ë¥´ê²Œ ì§€ì •í•˜ëŠ” ë°©ë²•
<img width="831" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-10-17 á„‹á…©á„’á…® 11 48 26" src="https://github.com/ScrumbleSwiftUIAndCombine/swiftui-daily-digest/assets/77331348/9bd5ec76-29b7-42ff-a793-3162b12fe45d">
7)


- switui í”Œì ì´ë©´ AppDelegate ì§ì ‘ ì¶”ê°€í•´ì¤˜ì•¼í•¨

```swift
import SwiftUI
import Firebase
import FirebaseMessaging

@main
struct Dev_Prod_tutorialApp: App {
    
    @UIApplicationDelegateAdaptor(AppDelegate.self) var appDelegate
    
    var body: some Scene {
        WindowGroup {
            ContentView()
        }
    }
}

class AppDelegate: NSObject, UIApplicationDelegate {
    
    // ì•±ì´ ì¼œì¡Œì„ë•Œ
    func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey : Any]? = nil) -> Bool {
        
        // Use Firebase library to configure APIs
        // íŒŒì´ì–´ë² ì´ìŠ¤ ì„¤ì •
        FirebaseApp.configure()
        
        // ì›ê²© ì•Œë¦¼ ë“±ë¡
        if #available(iOS 10.0, *) {
          // For iOS 10 display notification (sent via APNS)
          UNUserNotificationCenter.current().delegate = self

          let authOptions: UNAuthorizationOptions = [.alert, .badge, .sound]
          UNUserNotificationCenter.current().requestAuthorization(
            options: authOptions,
            completionHandler: { _, _ in }
          )
        } else {
          let settings: UIUserNotificationSettings =
            UIUserNotificationSettings(types: [.alert, .badge, .sound], categories: nil)
          application.registerUserNotificationSettings(settings)
        }

        application.registerForRemoteNotifications()
        
        // ë©”ì„¸ì§• ë¸ë¦¬ê²Ÿ
        Messaging.messaging().delegate = self
        
        
        // í‘¸ì‹œ í¬ê·¸ë¼ìš´ë“œ ì„¤ì •
        UNUserNotificationCenter.current().delegate = self
        
        return true
    }
    
    // fcm í† í°ì´ ë“±ë¡ ë˜ì—ˆì„ ë•Œ
    func application(_ application: UIApplication, didRegisterForRemoteNotificationsWithDeviceToken deviceToken: Data) {
        Messaging.messaging().apnsToken = deviceToken
    }
    
}

extension AppDelegate : MessagingDelegate {
    
    // fcm ë“±ë¡ í† í°ì„ ë°›ì•˜ì„ ë•Œ
    func messaging(_ messaging: Messaging, didReceiveRegistrationToken fcmToken: String?) {
        print("AppDelegate - íŒŒë²  í† í°ì„ ë°›ì•˜ë‹¤.")
        print("AppDelegate - Firebase registration token: \(String(describing: fcmToken))")
    }
}

extension AppDelegate : UNUserNotificationCenterDelegate {
    
    // í‘¸ì‹œë©”ì„¸ì§€ê°€ ì•±ì´ ì¼œì ¸ ìˆì„ë•Œ ë‚˜ì˜¬ë•Œ
    func userNotificationCenter(_ center: UNUserNotificationCenter,
                                willPresent notification: UNNotification,
                                withCompletionHandler completionHandler: @escaping (UNNotificationPresentationOptions) -> Void) {
        
        let userInfo = notification.request.content.userInfo
        
        print("willPresent: userInfo: ", userInfo)
        
        completionHandler([.banner, .sound, .badge])
    }
    
    // í‘¸ì‹œë©”ì„¸ì§€ë¥¼ ë°›ì•˜ì„ ë•Œ
    func userNotificationCenter(_ center: UNUserNotificationCenter,
                                didReceive response: UNNotificationResponse,
                                withCompletionHandler completionHandler: @escaping () -> Void) {
        let userInfo = response.notification.request.content.userInfo
        print("didReceive: userInfo: ", userInfo)
        completionHandler()
    }
    
}
```