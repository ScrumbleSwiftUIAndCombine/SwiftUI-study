# Menu

ì‘ì—… ë©”ë‰´ë¥¼ í‘œì‹œí•˜ê¸° ìœ„í•œ ì»¨íŠ¸ë¡¤

```jsx
Menu { // ë©”ë‰´ ì•„ì´í…œ êµ¬ì„±
    Button("Open in Preview", action: openInPreview)
    Button("Save as PDF", action: saveAsPDF)
} label: { // ë©”ë‰´ ì»¨íŠ¸ë¡¤ UI
    Label("PDF", systemImage: "doc.fill")
}
```

- Section ë‚˜ëˆ„ê¸° ê°€ëŠ¥
- .menuStyle(EditingControlsMenuStyle()): ë©”ë‰´ ìŠ¤íƒ€ì¼ ì§€ì •

```jsx
import SwiftUI

let myPets = ["ë©ë©ì´ ğŸ¶", "ì•¼ì˜¹ì´ ğŸ˜»", "ì°ì°ì´ ğŸ­"]

struct ContentView: View {
    
    @State private var shouldShowAlert: Bool = false
    @State private var myText: String = ""
    @State private var selected: Int = 0
    
    var body: some View {
        NavigationView {
            VStack(spacing: 20) {
                Text("\(myPets[selected])")
                    .font(.system(size: 60))
                    .bold()
                Text("ìš°ì¸¡ ìƒë‹¨ì— ë•¡ë•½ë•¡ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”")
            }
            .padding()
            .navigationTitle("í•˜ì´ìš”")
            .toolbar (content: {
                ToolbarItem(
                    placement: .navigationBarTrailing, // ìœ„ì¹˜ ì„¤ì •
                    content: {
                        Menu (content: { // ë©”ë‰´ ì•„ì´í…œ
                            Button(action: {
                                print("ë²„íŠ¼ í´ë¦­")
                                shouldShowAlert = true
                                myText = "ì˜¤ëŠ˜ë„ ë¹¡ì½”ë”©"
                            }, label: {
                                Label("ì˜¤ëŠ˜ë„ ë¹¡ì½”ë”©", systemImage: "flame.fill")
                                    .font(.system(size: 30))
                                    .foregroundColor(.white)
                            })
                            
                            // ë©€í‹° íŠ¸ë ˆì¼ë§ í´ë¡œì €
                            Button {
                                print("ì§‘ì—ì„œ ì‰¬ëŠ”ë‚ ")
                                shouldShowAlert = true
                                myText = "ì§‘ì—ì„œ ì‰¬ëŠ”ë‚ "
                            } label: {
                                Label("ì§‘ì—ì„œ ì‰¬ëŠ”ë‚ ", systemImage: "house.fill")
                                    .font(.system(size: 30))
                                    .foregroundColor(.white)
                            }
                            
                            Section {
                                // ë©€í‹° íŠ¸ë ˆì¼ë§ í´ë¡œì €
                                Button {
                                } label: {
                                    Label("ìƒˆ íŒŒì¼ ë§Œë“¤ê¸°", systemImage: "doc")
                                }
                                
                                Button {
                                } label: {
                                    Label("ìƒˆ í´ë” ë§Œë“¤ê¸°", systemImage: "folder")
                                }
                            }
                            
                            Section {
                                // ë©€í‹° íŠ¸ë ˆì¼ë§ í´ë¡œì €
                                Button {
                                } label: {
                                    Label("íŒŒì¼ ëª¨ë‘ ì‚­ì œ", systemImage: "trash")
                                }
                            }
                            
                            Picker(
                                selection: $selected,
                                label: Text("ì• ì™„ë™ë¬¼ ì„ íƒ")
                            ) {
                                ForEach(myPets.indices, id: \.self, content: { index in
                                    Text("\(myPets[index])")
                                        .tag(index)
                                })
                            }

                        }, label: { // ë©”ë‰´ ì•„ì´ì½˜
                            Circle()
                                .foregroundColor(.purple)
                                .frame(width: 50, height: 50)
                                .overlay(
                                    Label("ë”ë³´ê¸°", systemImage: "ellipsis")
                                        .font(.system(size: 30))
                                        .foregroundColor(.white)
                                )
                        })

                    }
                )
            }) // toolbar
            .alert(
                isPresented: $shouldShowAlert,
                content: {
                    Alert(title: Text("ì•Œë¦¼"), message: Text("\(myText)"))
            })
        }
    }
}
```

![1](https://github.com/ScrumbleSwiftUIAndCombine/swiftui-daily-digest/assets/77331348/b3d16e37-6078-402f-a6ab-ce2c15256ce2)


## ****Multiple trailing closures(ë‹¤ì¤‘ í›„í–‰ í´ë¡œì €)****

- ì²« ë²ˆì§¸ í›„í–‰ í´ë¡œì €ëŠ” ì¸ìˆ˜ ë¼ë²¨ì„ ì‚­ì œí•©ë‹ˆë‹¤.
- í›„ì† í›„í–‰ í´ë¡œì €ì—ëŠ” ì¸ìˆ˜ ë ˆì´ë¸”ì´ í•„ìš”í•©ë‹ˆë‹¤.

swift 5.3ë¶€í„° ê°€ëŠ¥.

ì—¬ëŸ¬ ê°œì˜ í´ë¡œì €ê°€ ìˆëŠ” í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ë” ê°„ë‹¨í•œ ë°©ë²•

before

- Button

```jsx
Button(action: {
    self.showOptions.toggle()
}, label: {
    Image(systemName: "gear")
})
```

- UIView.animate

after

```jsx
Button {
    self.showOptions.toggle()
} label: {
    Image(systemName: "gear")
}
```

```jsx
UIView.animate(
	withDuration: 0.3, 
	animations: {
	  self.view.alpha = 0
	}, 
	completion: { _ in
	  self.view.removeFromSuperview()
	}
)
```

```jsx
// Multiple trailing closure arguments
UIView.animate(withDuration: 0.3) {
  self.view.alpha = 0
} completion: { _ in
  self.view.removeFromSuperview()
}
```

- sink

```jsx
ipAddressPublisher
  .sink { identity in
    self.hostnames.insert(identity.hostname!)
  }

ipAddressPublisher
  .sink(receiveCompletion: { completion in
    // handle error
  }) { identity in
    self.hostnames.insert(identity.hostname!)
  }
```

```jsx
ipAddressPublisher
  .sink { identity in
    self.hostnames.insert(identity.hostname!)
  }

ipAddressPublisher
  .sink { identity in
    self.hostnames.insert(identity.hostname!)
  } receiveCompletion: { completion in
    // handle error
  }
```

- Section

```jsx
Section {
  // content
}
Section(header: ...) {
  // content
}
Section(footer: ...) {
  // content
}
Section(
  header: ...,
  footer: ...
) {
  // content
}
```

```jsx
Section {
  // content
}
Section {
  // content
} header: {
  ...
}
Section {
  // content
} footer: {
  ...
}
Section {
  // content
} header: {
  ...
} footer: {
  ...
}
```

# LazyVGrid

ìˆ˜ì§ìœ¼ë¡œ ì»¤ì§€ëŠ” ê·¸ë¦¬ë“œì— í•˜ìœ„ ë·°ë¥¼ ë°°ì—´í•˜ì—¬ í•„ìš”í•œ ë§Œí¼ë§Œ í•­ëª©ì„ ìƒì„±í•˜ëŠ” ì»¨í…Œì´ë„ˆ ë·°

ScrollViewë¡œ ê°ì‹¸ì•¼ ìŠ¤í¬ë¡¤ ê°€ëŠ¥í•˜ë‹¤.

Lazyê°€ ë¶™ì€ ì´ìœ ? í•„ìš”í• ë•Œë§Œ í•´ë‹¹ SubViewë¥¼ ì •ë ¬í•´ ìƒì„±í•´ì„œ

- `columns`: ì—´ ìˆ˜ë¥¼ ì§€ì •([GridItem] íƒ€ì…)
- `spacing`: ì¤„ê°„ê²©(default: 10)
- `content`: ì»¨í…ì¸  ë·°

## GridItem ì˜µì…˜

- fixed

ê³ ì •ëœ ì‚¬ì´ì¦ˆë¡œ ì•„ì´í…œì„ ì§€ì •

```jsx
GridItem(.fixed(100)),
GridItem(.fixed(50)),
GridItem(.fixed(50))
```

<img width="234" alt="2" src="https://github.com/ScrumbleSwiftUIAndCombine/swiftui-daily-digest/assets/77331348/ddd03871-a0ec-4d3b-bdd9-df3df2451e69">

- adaptive

ìµœì†Œê°’ê³¼ ìµœëŒ€ê°’ì„ ì •í•˜ê³  ì´ ì‚¬ì´ì˜ ì‚¬ì´ì¦ˆë¡œ ê°€ì¥ ë§ì´ ë°°ì¹˜ ê°€ëŠ¥í•˜ê²Œ í• ë•Œ ì‚¬ìš©

```jsx
GridItem(.adaptive(minimum: 100)),
GridItem(.adaptive(minimum: 50)),
GridItem(.adaptive(minimum: 50))
```

<img width="235" alt="3" src="https://github.com/ScrumbleSwiftUIAndCombine/swiftui-daily-digest/assets/77331348/cb160ccb-c7f3-4364-9b62-867a54b6d9d0">

- flexible

ìµœì†Œ/ìµœëŒ€ê°’ì„ ì •í•´ë‘ê³  ë·° í¬ê¸°ì— ë”°ë¼ ì‚¬ì´ì¦ˆë¥¼ ì¡°ì ˆ

```jsx
GridItem(.flexible(minimum: 100)),
GridItem(.flexible(minimum: 50)),
GridItem(.flexible(minimum: 50))
```

<img width="227" alt="4" src="https://github.com/ScrumbleSwiftUIAndCombine/swiftui-daily-digest/assets/77331348/7c90488f-fe9c-4116-9a39-bec7f26ab8a2">

```jsx
var body: some View {
        // ìŠ¤í¬ë¡¤ë·°ë¡œ ê°ì‹¸ì„œ ìŠ¤í¬ë¡¤ ê°€ëŠ¥í•˜ë„ë¡ ì„¤ì •
        ScrollView {
            LazyVGrid(
                // columns: horizontal ì•„ì´í…œ ë ˆì´ì•„ì›ƒì„ ì„¤ì •í•˜ëŠ” ë¶€ë¶„
                // GridItem ì˜µì…˜ 3ê°€ì§€
                // - .fixed ê³ ì •
                // - .adaptive ì—¬ëŸ¬ê°œ ì±„ìš°ê¸° - ê³„ì‹ í•´ì„œ ë¶„í• ë¡œ ì±„ìš°ê¸°
                // - .flexible í•˜ë‚˜ë§Œ ì±„ìš°ê¸° - ê³„ì‹ í•´ì„œ ë¶„í• ë¡œ ì±„ìš°ê¸°
                columns: [
                    GridItem(.fixed(50)),
//                    GridItem(.adaptive(minimum: 500)),
                    GridItem(.flexible(minimum: 50))
                ],
                spacing: 20,
                content: {
                    ForEach(dummyDataArray) { (dataItem: MyModel) in
                        Rectangle()
                            .foregroundColor(.blue)
                            .frame(height: 120)
                            .overlay(
                                Text("\(dataItem.title)")
                            )
                    }
                }
            )
        }
    }
```

## .animation deprecated

<aside>
ğŸ’¡ 'animation' was deprecated in iOS 15.0: Use withAnimation or animation(_:value:) instead.

</aside>

```jsx
.animation(.easeInOut)
```

```jsx
.animation(.easeInOut, value: selectedLayoutType)
```

í”¼ì»¤ë·° ì•„ì´í…œ ë³€ê²½ë ë•Œë§Œ ì• ë‹ˆë©”ì´ì…˜ì„ ì ìš©

```jsx
.withAnimation {
    // ì• ë‹ˆë©”ì´ì…˜ì„ ì ìš©í•  ì½”ë“œ
}
```


https://github.com/ScrumbleSwiftUIAndCombine/swiftui-daily-digest/assets/77331348/d527946b-67cd-4953-8f92-520c3cbcb9cb

# ****Redux****

: react + flux

**ìë°”ìŠ¤í¬ë¦½íŠ¸ ì•±ì„ ìœ„í•œ ì˜ˆì¸¡ ê°€ëŠ¥í•œ ìƒíƒœ ì»¨í…Œì´ë„ˆ**

ë‹¨ë°©í–¥ ë°ì´í„° íë¦„ì„ ê°€ì§

storeë¥¼ í†µí•´ì„œë§Œ ì „ì—­ìƒíƒœê´€ë¦¬

![ã…‡ã…‡ã…‡ã…‡](https://github.com/ScrumbleSwiftUIAndCombine/swiftui-daily-digest/assets/77331348/0eaa9618-e9d5-49cf-ab10-b59c8e981714)

- store: ì•± ì „ì²´ì˜ ìƒíƒœë¥¼ ê°€ì§€ê³  ìˆëŠ” ë…€ì„
- action: reducerì—ê²Œ ì•Œë¦¬ëŠ” ìƒíƒœ ë³€ê²½ì— ëŒ€í•œ ì•¡ì…˜
- reducer: ì•¡ì…˜ìœ¼ë¡œ ìƒˆë¡œìš´ ì•± ìƒíƒœë¥¼ ë³€ê²½í•˜ëŠ” ë©”ì†Œë“œë“¤ì„ ì œê³µí•˜ëŠ” ê²ƒë“¤
    - í˜„ì¬ ì•± ìƒíƒœë¥¼ ë°›ê±°ë‚˜ ì•± ìƒíƒœë¥¼ ë³€ê²½í•˜ê¸° ìœ„í•´ ì•¡ì…˜ì„ ë³´ë‚´ëŠ” ë…€ì„

## **App State**

ë¦¬ë“€ì„œì— ì‘ì—…ì„ ì „ë‹¬í•˜ì—¬ Stateë¥¼ ìˆ˜ì •

```jsx
// ì•±ì˜ ìƒíƒœ ì¦‰ ë°ì´í„° -
struct AppState {
    var currentDice: String {
        didSet {
            print("currentDice: \(currentDice)", #fileID)
        }
    }
}
```

@EnvironmentObject ì†ì„±ê³¼ í•¨ê»˜ í•´ë‹¹ ê°ì²´ì— ì•¡ì„¸ìŠ¤í•´ì•¼ í•˜ëŠ” ëª¨ë“  í•˜ìœ„ í•­ëª©ì— ì „ë‹¬

## **App Actions**

ë¦¬ë“€ì„œì— ì‘ì—…ì„ ì „ë‹¬í•˜ì—¬ Stateë¥¼ ìˆ˜ì •

```jsx
// ìƒíƒœã…¡ ì¦‰ state ë³€ê²½ì„ ìœ„í•œ ì•¡ì…˜
enum AppAction: String {
    // ì£¼ì‚¬ìœ„ë¥¼ êµ´ë¦¬ëŠ” ì•¡ì…˜ - í˜„ì¬ ì£¼ì‚¬ìœ„ ìƒíƒœë¥¼ ë³€ê²½í•˜ëŠ” ì•¡ì…˜
    case rollTheDice
}
```

## **App Reducers**

í˜„ì¬ ìƒíƒœë¥¼ ìˆ˜ì‹ í•˜ê³  ì´ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰

```jsx
// ë§¤ê°œë³€ìˆ˜ë¡œ ë“œì–´ì˜¤ëŠ” ê°’ì„ ë³€ê²½í•˜ê¸° ìœ„í•´ inout í‚¤ì›Œë“œë¥¼ ë¶™ì—¬ì¤Œ
// (inout State, Action) -> Void í•´ë‹¹ í´ë¡œì € ìì²´ë¥¼ ë³„ì¹­ìœ¼ë¡œ Reducerë¡œ ì¹­í•¨ stateì™€ actionì„ ê°€ì§€ê³  ìˆìŒ
// typealias ë³„ì¹­ìœ¼ë¡œ ë§Œë“ ë‹¤.
typealias Reducer<State, Action> = (inout State, Action) -> Void

// í•„í„°ë§ì„ í•˜ëŠ” ë©”ì†Œë“œ
func appReducer(_ state: inout AppState, _ action: AppAction) -> Void {
    // ë“¤ì–´ì˜¤ëŠ” ì•¡ì…˜ì— ë”°ë¼ ë¶„ê¸° ì²˜ë¦¬ - ì¦‰ í•„í„°ë§
    switch action {
    case .rollTheDice:
        // ì•±ì˜ ìƒíƒœë¥¼ ë³€ê²½í•˜ê¸°
        state.currentDice = ["1", "2", "3", "4", "5", "6"].randomElement() ?? "1"
    }
}
```

Stateë¥¼ inout ë§¤ê°œë³€ìˆ˜ë¡œ ìˆ˜ì‹ í•˜ê³  í•´ë‹¹ Actionì„ ìˆ˜ì‹ í•©ë‹ˆë‹¤.

Â inout ë§¤ê°œë³€ìˆ˜ë¥¼ ì‚¬ìš©í•¨ìœ¼ë¡œì¨ ìš°ë¦¬ëŠ” ë§¤ë²ˆ source of truthë¥¼ ë³€ê²½

## **App Store**

ì•± ìƒíƒœë¥¼ ìœ ì§€í•˜ê³  ì½ê¸° ì „ìš© ì•¡ì„¸ìŠ¤ë¥¼ í™œì„±í™”

```jsx
typealias AppStore = Store<AppState, AppAction>

// ObservableObject ì•± ìƒíƒœë¥¼ ê°€ì§€ê³ . ìˆëŠ” ì˜µì €ë²„ë¸” ì˜¤ë¸Œì íŠ¸ ìŠ¤í† ì–´
final class Store<State, Action>: ObservableObject {
    
    // ì™¸ë¶€ì—ì„œ ì½ì„ ìˆ˜ë§Œ ìˆë„ë¡ private(set) ì„¤ì •
    @Published private(set) var state: State
    private let reducer: Reducer<State, Action>
    
    // ì œë„¤ë¦­ í˜•íƒœì˜ State
    // ì¦‰ Storeê°€ ê°€ì§€ê³  ìˆëŠ” ì œë„¤ë¦­ State
    // ìƒì„±ì ë©”ì†Œë“œ
    // escapingìœ¼ë¡œ ë¹ ì ¸ë‚˜ê°€ê¸° ìœ„í•´ @escaping ë„£ì–´ì£¼ê¸°
    
    init(state: State, reducer: @escaping Reducer<State, Action>) {
        self.state = state
        self.reducer = reducer
    }
    
    // dispatchë¥¼ í†µí•´ ì•¡ì…˜ì„ ì·¨í•œë‹¤
    func dispatch(action: Action) {
        // inout ë§¤ê°œë³€ìˆ˜ë¥¼ ë„£ì„ë•ŒëŠ” & ìš” í‘œì‹œë¥¼ í•´ì¤˜ì•¼í•¨
        // reducer í´ë¡œì €ë¥¼ ì‹¤í–‰í•´ì„œ ì•¡ì…˜ì„ í•„í„°ë§ í•œë‹¤.
        reducer(&self.state, action)
    }
}
```

ObservableObjectë¡œ ë§Œë“¤ê³  ì•± ìƒíƒœë¥¼ @Published ì†ì„±ìœ¼ë¡œ ì„¤ì •

â†’ ë·°ëŠ” ë³€ê²½ ì‚¬í•­ì„ êµ¬ë…í•˜ê³  ìë™ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•  ìˆ˜ ìˆìŒ

ì½ê¸° ì „ìš©ì´ë¼ ì ‘ê·¼ ì œì–´ì private(set)ë¡œ ì„¤ì •

ì´ˆê¸°í™” ì‹œ ì¼ë¶€ ë°ì´í„°ë¥¼ ë¡œë“œí•˜ë ¤ëŠ” ê²½ìš° ì´ˆê¸°í™” í”„ë¡œê·¸ë¨ì„ ì‚¬ìš©í•˜ì—¬ ì´ˆê¸° ìƒíƒœë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìœ¼ë©° ì´ë¥¼ ë³€ê²½í•˜ëŠ” ë° ì‚¬ìš©í•  ê°ì†ê¸°ë¥¼ ì •ì˜

Actionì„ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ì•„ ë¦¬ë“€ì„œì— ì „ë‹¬í•˜ëŠ” Dispatch í•¨ìˆ˜ë„ ì •ì˜

## **View**

ë·°ëŠ” @Environment ì†ì„± ë˜í¼ë¥¼ í†µí•´ AppStoreì— ë°”ì¸ë”©ë˜ê³  Stateì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.

```jsx
struct DiceView: View {
    // ì™¸ë¶€ì—ì„œ environmentObject() ë¡œ ì—°ê²°ë¨
    @EnvironmentObject var store: AppStore
    @State private var shouldRoll = false
    @State private var pressed = false
    var diceRollAnimation: Animation {
        Animation.spring()
    }
    
    // ì£¼ì‚¬ìœ„ êµ´ë¦¬ê¸° ì•¡ì…˜ì„ ì‹¤í–‰
    func rollTheDice() {
        print(#fileID, #function, #line)
        self.store.dispatch(action: .rollTheDice)
    }
    
    var body: some View {
        VStack {
            Text(self.store.state.currentDice) // ë°”ì¸ë”©
            Button { 
                rollTheDice()
            } label: {
                Text("ëœë¤ ì£¼ì‚¬ìœ„ êµ´ë¦¬ê¸°")
            }
				}
		}
}
```

ë²„íŠ¼ì„ íƒ­í•˜ë©´ ì•¡ì…˜ì´ ì „ë‹¬ë©ë‹ˆë‹¤.Â ì´ëŠ” ìƒíƒœë¥¼ ìˆ˜ì •í•˜ëŠ” Reducerì— ë„ì°©í•©ë‹ˆë‹¤.Â SwiftUI ìë™ ë°”ì¸ë”©ì€ ìƒíƒœê°€ ë³€ê²½ë˜ìë§ˆì ë·°ë¥¼ ë‹¤ì‹œ ë Œë”ë§í•©ë‹ˆë‹¤.

## **Main View**

```jsx
struct ContentView: View {
    // ìŠ¤í† ì–´ ìƒì„±
    let store = AppStore(
        state: .init(currentDice: "1"),
        reducer: appReducer(_:_:)
    )
    var body: some View {
        // ì„œë¸Œë·°ì— ì˜µì €ë²„ë¸” ì˜¤ë¸Œì íŠ¸ë¥¼ ì—°ê²°í•œë‹¤.
        DiceView()
            .environmentObject(store)
    }
}
```

## ì¥ì 

- ì „ì—­ state ë³€ìˆ˜ë¥´ í•œê³³ì—ì„œ ê´€ë¦¬
    - ìƒíƒœ ê´€ë¦¬ê°€ ìš©ì´
- ë‹¨ë°©í–¥ data flowë¼ì„œ ì˜¤ë¥˜ ê´€ë¦¬ê°€ ì‰½ë‹¤

## ë‹¨ì 

- ë¡œì§ì´ ë³µì¡í•´ì§
    - dispatcher â†’ reducer, action ê±°ì³ì•¼
- stateì´ ë°”ë€”ë•Œë§ˆë‹¤ ë Œë”ë§ì¼ì–´ë‚¨
    - ì„±ëŠ¥ ê´€ë¦¬ í˜ë“¤ì–´ì§
- ì–‘ë°©í–¥ binding ë¬¸ì œ
    - ex) pickerview, textfield
    - bindingëœ ê°’ì„ get,setí•˜ëŠ”ê²Œ ëª¨ë‘ ê°€ëŠ¥í•œë° ë‹¨ë°©í–¥ íë¦„ì˜ redux ì›ì¹™ ìœ„ë°°
- local state ê´€ë¦¬ ë¬¸ì œ
    - ë‹¨ë°©í–¥ ë°ì´í„°í”Œë¡œìš°, bindingì„ ê°•ì œí•´ì•¼í• ê¹Œ
    -
